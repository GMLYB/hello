# Mysql

### 1. 七种 join

![7种join连接](..\image\7种join连接.jpg)

* mysql 没有全外连接



### 2. 索引

* 官方定义：索引（index）是帮助MySQL高校获取数据的数据结构。-->索引是数据结构。-->**排好序的快速查找数据结构。**

* 索引影响where（查询）和order by（排序）
* **排好序的快速查找数据结构：**数据本身之外，数据库还维护着一个满足特定查找算法的数据结构，这些数据结构以某种方式指向数据，这样就可以在这些数据结构的基础上实现高级查找算法，这种数据结构就是索引。
* **我们平常所说的索引，没有特别指明，都是指B数（多路搜索树，不一定是二叉树）结构组织的索引。**其中聚集索引，次要索引，符合索引，前缀索引，唯一索引默认都是使用B+数索引，统称索引。除了B+树这种类型的索引之外，还有哈希索引等。



#### 2.1 索引的优势和劣势

##### 优势：

* 提高数据检索的效率，降低数据库的IO成本
* 通过索引对数据进行排序，降低数据排序的成本，降低了CPU的消耗

##### 劣势：

* 实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的
* 虽然索引大大提高了查询速度，但是降低了表的更新速度，如对表进行insert、update和delete。因为更新表时，MySQL不仅仅要保存数据，还要保存一下索引文件，每次更新添加了索引列的字段，都会调整因为更新所带来的键值对变化后的索引信息。
* 索引只是提高效率的一个因素，如果mysql存在大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询。



#### 2.2 索引分类

* 单值索引：一个索引只包含单个列，一个表可以有多个单列索引
* 唯一索引：索引列的值必须唯一，单允许有空值
* 复合索引：一个索引包含多个列

##### 基本语法

```sql
创建：
create [unique] index indexName on mytable(columnname(length));
alter mytable add [unique] index [indexname] on (columnname(length))

删除：
drop index [indexName] on mytable;

查看：
show index from table_name
```

##### 使用alter命令

```sql
四种方式添加数据表的索引：
该语句添加一个主键，这意味着索引值必须唯一，且不为空
alter tablename add primary(column_list)

该语句创建索引的值必须是唯一的（除null外，null可能会出现很多次）
alter tablename add unique index_name(column_list)

添加普通索引，索引值可能会出现多次
alter tablename add index index_name(column_list)

该语句指定索引为fulltext，用于全文索引
alter tablename add fulltext index_name(coumn_list)


```



#### 2.3 mysql索引结构

* **BTree索引**
* Hash索引
* full-text全文索引
* R-Tree索引
## Redis

### 1 什么是NoSQL

* NoSQL = Not Only SQL
* 关系型数据库：表格，行，列
* 泛指非关系型数据库。



### 2 NoSQL的特点

#### 2.1 解耦

* 方便拓展。数据之间没有关系，容易拓展。
* 大数据量高性能（Redis一秒写8万次，读取11万次）。NoSQL的缓存纪录级，是一种细粒度的缓存，性能较高。
* 数据类型是多样性的。不需要事先设计数据库，随取随用



#### 2.2 传统RDBMS 和 NoSQL比较

##### 传统的RDBMS

* 结构化组织
* SQL
* 数据和关系都存在单独的表中
* 数据定义语言
* 严格的一致性
* 基础的事务

##### NoSQL

* 不仅仅是数据
* 没有固定的查询语句
* 键值对存储，列存储，文档存储，图形数据库（社交关系）
* 最终一致性
* CAP定理和BASE
* 高性能，高可用，高扩展



#### 2.3 3V和3高

##### 大数据时代的3V：描述问题

* 海量Volume
* 多样Variety
* 实时Velocity

##### 大数据时代的3高：对程序的要求

* 高并发
* 高可拓
* 高性能



### 3 现在互联网的样子

```
1.商品的基本信息
	名称、价格、商家信息：
	采用关系型数据库：MySQL / Oracle

2.商品的描述、评论（文字比较多）
	文档型数据库：MongoDB
	
3.图片
	分布式文件系统 FastDFS
	淘宝	TFS
	Google GFS
	Hadoop HDFS
	阿里云 oss

4.商品的关键字（搜索）
	搜索引擎 solr elasticsearch
	ISearch：多隆
	
5.商品热门的波段信息
	内存数据库
	Redis Tair Memache
	
6.商品的交易，外部的支付接口
	三方应用
```



### 4 NoSQL的四大分类

#### 4.1 KV键值对

* 新浪：Redis
* 美团：Redis + Tair
* 阿里、百度：Redis + memecache



#### 4.2 文档型数据库

* MongoDB
  * MongoDB是一个基于分布式文件存储的数据库，C++编写，主要用来处理大量的文档
  * MongoDB是一个介于关系型数据库和非关系型数据库中间的产品，MongoDB是非关系型数据库中功能最丰富，最像关系型数据库的数据库。



#### 4.3 列存储数据库

* HBase
* 分布式文件系统



#### 4.4 图关系数据库

* **存储关系的，不是存储图形的！**例如：朋友圈社交网络，广告推荐
* Neo4j、InfoGrid..



#### 4.5 汇总

|       分类        |                       举例                       |                           应用场景                           |                   数据模型                    |                             优点                             |                             缺点                             |
| :---------------: | :----------------------------------------------: | :----------------------------------------------------------: | :-------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|  键值(key-value)  | Tokyo Cabinet/Tyrant,Redis, Voldemort,Oracle BDB | 内容缓存，主要用于处理大量数据的高访问负载，也用于一些日志系统等等 | Key指向Value 的键值对，通常用hash table来实现 |                          查找速度快                          |        数据无结构化，通常只被当作字符串或者二进制数据        |
|   列存储数据库    |              Cassandra, HBase,Riak               |                       分布式的文件系统                       |      以列簇式存储，将同一列数据存在一起       |         查找速度快，可扩展性强，更容易进行分布式扩展         |                         功能相对局限                         |
|   文档型数据库    |                 CouchDB, MongoDb                 | Web应用(与Key-Value类似，Value是结构化的，不同的是数据库能够了解Value的内容) |   Key-Value对应的键值对，Value为结构化数据    | 数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构 |             查询性能不高，而且缺乏统一的查询语句             |
| 图形(Graph)数据库 |          Neo4J,InfoGrid,Infinite Graph           |           社交网络，推荐系统等。专注于构建关系图谱           |                    图结构                     |     利用图结构相关算法。比如最短路径寻址，N度关系查找等      | 很多时候需要对整个图做计算才能得出需要的信息，而且这种结构不太好做分布式的集群方案 |











